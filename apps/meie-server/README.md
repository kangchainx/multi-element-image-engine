# ComfyUI API Demo

ç”¨TypeScriptä»£ç è‡ªåŠ¨è°ƒç”¨ComfyUIç”Ÿæˆå›¾ç‰‡çš„æ¼”ç¤ºé¡¹ç›® ğŸ¨

## ğŸ¯ è¿™æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ä¸€ä¸ª**é¢è¯•çº§åˆ«çš„TypeScripté¡¹ç›®**ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡APIè°ƒç”¨ComfyUIæ¥è‡ªåŠ¨åŒ–å›¾ç‰‡ç”Ÿæˆã€‚

**é€šå¸¸æ–¹å¼**: æ‰“å¼€ComfyUIç•Œé¢ â†’ æ‰‹åŠ¨ç‚¹å‡» â†’ ç”Ÿæˆå›¾ç‰‡
**è¿™ä¸ªé¡¹ç›®**: è¿è¡Œä»£ç  â†’ è‡ªåŠ¨æäº¤ â†’ æ‰¹é‡ç”Ÿæˆ

## ğŸ“‹ å‰ç½®æ¡ä»¶

- âœ… Node.js 18+
- âœ… ComfyUIè¿è¡Œä¸­ï¼ˆä½ çš„ç«¯å£ï¼š8000ï¼‰
- â— **éœ€è¦å®‰è£…æ¨¡å‹** - è¯·å…ˆæŸ¥çœ‹ä¸‹é¢çš„å¿«é€Ÿå¼€å§‹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. æ£€æŸ¥æ¨¡å‹çŠ¶æ€ï¼ˆé‡è¦ï¼ï¼‰

```bash
npm run check
```

å¦‚æœæ˜¾ç¤º"æœªæ‰¾åˆ°ä»»ä½•æ¨¡å‹"ï¼Œä½ éœ€è¦ï¼š
1. ä¸‹è½½Stable Diffusionæ¨¡å‹
2. æ”¾åˆ° `/Users/chris/Documents/ComfyUI/models/checkpoints/`
3. è¯¦ç»†æ­¥éª¤è§ â†’ **[æ¨¡å‹å®‰è£…æŒ‡å—.md](./æ¨¡å‹å®‰è£…æŒ‡å—.md)**

### 3. è¿è¡Œdemoç”Ÿæˆå›¾ç‰‡

```bash
npm start
```

å›¾ç‰‡å°†ä¿å­˜åˆ° `/Users/chris/Documents/ComfyUI/output/`

## ğŸ“š æ–‡æ¡£å¯¼èˆª

- **[å¿«é€Ÿå¼€å§‹.md](./å¿«é€Ÿå¼€å§‹.md)** â­ å®Œæ•´çš„3æ­¥å…¥é—¨æŒ‡å—
- **[ä½¿ç”¨æŒ‡å—.md](./ä½¿ç”¨æŒ‡å—.md)** ğŸ“– è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜å’Œæµç¨‹å›¾
- **[æ¨¡å‹å®‰è£…æŒ‡å—.md](./æ¨¡å‹å®‰è£…æŒ‡å—.md)** ğŸ’¾ å¦‚ä½•ä¸‹è½½å’Œå®‰è£…æ¨¡å‹

## ğŸ› ï¸ å¯ç”¨å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `npm start` | è¿è¡Œdemoï¼Œç”Ÿæˆå›¾ç‰‡ |
| `npm run check` | æ£€æŸ¥ComfyUIä¸­æœ‰å“ªäº›å¯ç”¨æ¨¡å‹ |
| `npm run dev` | å¼€å‘æ¨¡å¼ï¼ˆæ–‡ä»¶æ”¹åŠ¨è‡ªåŠ¨é‡å¯ï¼‰ |
| `npm run build` | ç¼–è¯‘TypeScriptåˆ°JavaScript |

## ğŸ”„ å·¥ä½œæµç¨‹

```
1. ä½ åœ¨ComfyUIè®¾è®¡workflow â†’ å¯¼å‡ºJSON
         â†“
2. demo.tsè¯»å–JSON â†’ è°ƒç”¨APIæäº¤
         â†“
3. ComfyUIæœåŠ¡å™¨æ‰§è¡Œ â†’ ç”Ÿæˆå›¾ç‰‡
         â†“
4. ç¨‹åºæ˜¾ç¤ºç»“æœ â†’ ä½ æŸ¥çœ‹outputç›®å½•
```

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

- âœ… æ‰¹é‡ç”Ÿæˆå›¾ç‰‡ï¼ˆä¿®æ”¹ä»£ç å¾ªç¯æäº¤ï¼‰
- âœ… è‡ªåŠ¨åŒ–å·¥ä½œæµï¼ˆé›†æˆåˆ°ä½ çš„åº”ç”¨ï¼‰
- âœ… APIåç«¯æœåŠ¡ï¼ˆæ¥æ”¶è¯·æ±‚ç”Ÿæˆå›¾ç‰‡ï¼‰
- âœ… æŠ€æœ¯é¢è¯•å±•ç¤ºï¼ˆTypeScript + APIé›†æˆï¼‰

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
comfy-test/
â”œâ”€â”€ demo.ts                # ä¸»ç¨‹åºï¼ˆç”Ÿæˆå›¾ç‰‡ï¼‰
â”œâ”€â”€ check-models.ts        # æ¨¡å‹æ£€æŸ¥å·¥å…·
â”œâ”€â”€ Unsaved Workflow.json  # workflowé…ç½®
â”œâ”€â”€ tsconfig.json          # TypeScripté…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ å¿«é€Ÿå¼€å§‹.md            # 3æ­¥å…¥é—¨
â”œâ”€â”€ ä½¿ç”¨æŒ‡å—.md            # è¯¦ç»†è¯´æ˜
â””â”€â”€ æ¨¡å‹å®‰è£…æŒ‡å—.md        # æ¨¡å‹å®‰è£…
```

## âœ¨ æŠ€æœ¯ç‰¹æ€§

- ğŸ”· **TypeScript** - å®Œæ•´ç±»å‹å®šä¹‰ï¼Œstrictæ¨¡å¼
- ğŸŒ **åŸç”Ÿfetch API** - é›¶è¿è¡Œæ—¶ä¾èµ–
- âš¡ **Async/await** - ç°ä»£å¼‚æ­¥æ¨¡å¼
- ğŸ›¡ï¸ **å®Œå–„çš„é”™è¯¯å¤„ç†** - ç½‘ç»œã€æ–‡ä»¶ã€APIé”™è¯¯
- ğŸ”„ **è½®è¯¢æœºåˆ¶** - ç­‰å¾…å¼‚æ­¥ä»»åŠ¡å®Œæˆ
- ğŸ“¦ **ES Modules** - ç°ä»£æ¨¡å—ç³»ç»Ÿ

## ğŸ§ª ç¤ºä¾‹è¾“å‡º

```
=== ComfyUI API Demo ===
Client ID: 8131d7b2-9373-482f-83dc-4622a1bbdb4d

[1/4] Loading workflow...
Model: stable-diffusion-v1-5.safetensors
Prompt: beautiful scenery nature glass bottle landscape...
Size: 512x512

[2/4] Submitting workflow to ComfyUI...
âœ“ Workflow submitted successfully

[3/4] Waiting for execution to complete...
âœ“ Execution finished

[4/4] Processing results...
=== Generated Images ===
Image 1:
  Filename: ComfyUI_00001_.png

=== Demo Complete ===
```

## â“ å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆè¿è¡Œnpm startå‡ºé”™ï¼Ÿ**
A: å…ˆè¿è¡Œ `npm run check` ç¡®è®¤æœ‰å¯ç”¨æ¨¡å‹

**Q: å¦‚ä½•ä¿®æ”¹æç¤ºè¯ï¼Ÿ**
A: ç¼–è¾‘ `Unsaved Workflow.json` ä¸­çš„ `text` å­—æ®µ

**Q: å¦‚ä½•æ‰¹é‡ç”Ÿæˆï¼Ÿ**
A: ä¿®æ”¹ `demo.ts` æ·»åŠ å¾ªç¯ï¼Œè¯¦è§ä½¿ç”¨æŒ‡å—

**Q: æ”¯æŒå…¶ä»–æ¨¡å‹å—ï¼Ÿ**
A: æ”¯æŒï¼å®‰è£…åç”¨ `npm run check` æŸ¥çœ‹

## ğŸ”— ç›¸å…³é“¾æ¥

- [ComfyUIå®˜ç½‘](https://www.comfy.org/)
- [ComfyUI GitHub](https://github.com/comfyanonymous/ComfyUI)
- [Stable Diffusionæ¨¡å‹](https://huggingface.co/models)

---

**ç°åœ¨å¼€å§‹** â†’ è¿è¡Œ `npm run check` æ£€æŸ¥æ¨¡å‹çŠ¶æ€ ğŸš€
