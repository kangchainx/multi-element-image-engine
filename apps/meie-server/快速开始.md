# 🚀 快速开始指南

## 📊 当前状态

✅ ComfyUI服务器运行中 (端口8000)
✅ TypeScript项目已配置
❌ **需要安装模型**

## 🎯 3步开始使用

### 第1步: 安装模型 ⭐

你的ComfyUI目前没有模型，需要先安装一个。

**最简单的方法（推荐）：**

1. 打开ComfyUI界面: http://127.0.0.1:8000
2. 查看界面中是否有 "Manager" 按钮
3. 如果有，使用Manager安装 "Stable Diffusion v1.5"

**手动下载方法：**

```bash
# 创建模型目录（如果不存在）
mkdir -p /Users/chris/Documents/ComfyUI/models/checkpoints

# 下载模型到这个目录
# 推荐模型：Stable Diffusion v1.5
# 下载地址: https://huggingface.co/runwayml/stable-diffusion-v1-5
```

### 第2步: 检查模型是否安装成功

安装好模型后，运行：

```bash
npm run check
```

这个命令会：
- ✅ 检查ComfyUI中有哪些可用模型
- ✅ 自动更新workflow文件使用第一个模型

你会看到类似这样的输出：
```
✓ 找到 1 个可用模型:
  1. your-model-name.safetensors

✓ Workflow已更新
✅ 完成！现在可以运行 npm start 测试了
```

### 第3步: 运行demo生成图片

```bash
npm start
```

程序会：
1. 读取workflow配置
2. 提交到ComfyUI
3. 等待图片生成（约20-30秒）
4. 显示结果

生成的图片保存在：
```
/Users/chris/Documents/ComfyUI/output/
```

## 📁 项目文件说明

```
comfy-test/
├── demo.ts                    # 主程序（生成图片）
├── check-models.ts            # 模型检查工具
├── Unsaved Workflow.json      # workflow配置
├── 使用指南.md                 # 详细使用说明
├── 模型安装指南.md             # 模型安装步骤
└── 快速开始.md                 # 本文件
```

## 💡 使用场景示例

### 场景1: 生成一张图片（你现在的情况）

```bash
npm start
```

### 场景2: 修改提示词生成不同图片

1. 编辑 `Unsaved Workflow.json`
2. 找到 `"6"` 节点的 `"text"` 字段
3. 修改提示词，比如改成 `"a cute cat, high quality"`
4. 运行 `npm start`

### 场景3: 在ComfyUI界面设计新workflow

1. 打开 http://127.0.0.1:8000
2. 设计你的workflow（拖拽节点）
3. 导出为API格式（右上角菜单）
4. 保存为 `Unsaved Workflow.json`
5. 运行 `npm start`

### 场景4: 批量生成（修改代码）

编辑 `demo.ts`，在main函数中添加循环：

```typescript
// 生成10张不同的图片
for (let i = 0; i < 10; i++) {
  workflow['6'].inputs.text = `beautiful landscape ${i}`;
  const result = await submitWorkflow(workflow);
  await pollHistory(result.prompt_id);
}
```

## ❓ 常见问题

**Q: 为什么需要安装模型？**
A: ComfyUI需要AI模型来生成图片，就像Photoshop需要字体文件一样。

**Q: 模型文件很大怎么办？**
A: SD 1.5模型约4GB，这是正常的。可以先下载小一点的模型测试。

**Q: 如何知道ComfyUI有哪些模型？**
A: 运行 `npm run check` 就能看到所有可用模型。

**Q: 可以使用不同的模型吗？**
A: 可以！安装多个模型后，编辑workflow文件中的 `ckpt_name` 字段。

**Q: 生成图片需要多久？**
A: 取决于你的硬件和设置，通常20-60秒。你的Mac使用MPS（Apple Silicon GPU）。

## 🎬 完整流程动画

```
你 ──> 安装模型 ──> npm run check ──> npm start ──> 查看图片
        ↓              ↓                ↓            ↓
    下载文件      验证可用          API调用      output/目录
```

## 📞 需要帮助？

1. **模型问题** → 查看 `模型安装指南.md`
2. **使用问题** → 查看 `使用指南.md`
3. **代码问题** → 查看 `demo.ts` 中的注释

---

**现在就开始吧！** 👉 先运行 `npm run check` 看看模型状态
